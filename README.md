# DLProject-Preprocess

## In this workspace are the runnable and files needed to conduct the project for DL4NLP

### E3C preprocess

In order to preprocess the E3C XML files run the following runnable that is inside xmlToJson folder:

	python3 xmlToJson.py -h
	usage: xmlToJson.py [-h] [--dir ORIG_DIR [ORIG_DIR ...]]
                    		[--dest DEST_DIR [DEST_DIR ...]]

	This runnable converts the XML files in the mentioned directory into train, test, dev and train_dev divisions needed by the SpERT model.

	optional arguments:
  		-h, --help            show this help message and exit
  		--dir ORIG_DIR [ORIG_DIR ...]
                        Path to the directory that has the XML files.
  		--dest DEST_DIR [DEST_DIR ...]
                        Path to the directory to save the JSON output.
                        
### MIMIC preprocess 

In order to preprocess the MIMIC-III txt files run the following runnable that is inside txtToJson folder:

	python3 txtToJson.py -h
	usage: txtToJson.py [-h] [--txt ORIG_TXT [ORIG_TXT ...]]
                    [--json DEST_JSON [DEST_JSON ...]] [--r REDUCE]

	Turns a txt into json needed by the SpERT model..

	optional arguments:
  	-h, --help            show this help message and exit
  	--txt ORIG_TXT [ORIG_TXT ...]
                        Path no the .txt file with the words.
  	--json DEST_JSON [DEST_JSON ...]
                        Path to the JSON output
  	--r REDUCE            If applied the file will be divided in 12 word
                        sentences

If this has to be done over a directory a Bash script example is provided: txtToJson_mimic.sh

### JSON result entity, relation and text extraction

The runnable inside JSONtoTxt folder gets the JSON generated by Spert and prints in three files the tokens of the text, the entities predicted for the words of the text and the relations inferred.

python3 jsonToTxt.py -h
usage: jsonToTxt.py [-h] [--file ORIG_FILE [ORIG_FILE ...]]
                    [--dest_dir DEST_DIR [DEST_DIR ...]]

This runnable extracts the text, entities and relations of the given JSON
file.

optional arguments:
  -h, --help            show this help message and exit
  --file ORIG_FILE [ORIG_FILE ...]
                        Path to the file to convert.
  --dest_dir DEST_DIR [DEST_DIR ...]
                        Path to the directory to save the txt files.


